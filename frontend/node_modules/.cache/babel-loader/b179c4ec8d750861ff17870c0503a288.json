{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECTS\\\\ltbt-podcast\\\\frontend\\\\src\\\\components\\\\ProductPage.jsx\",\n    _s = $RefreshSig$();\n\nimport \"../styles/ProductPage.scss\";\nimport { productData } from \"../data/data\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useContext, useEffect, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { detailsProduct } from \"../actions/productActions\";\nimport LoadingBox from \"./LoadingBox\";\nimport MessageBox from \"./MessageBox\";\nimport { getError } from \"../utils\";\nimport { Store } from \"../Store\";\nimport Nav from \"./Nav\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_REQUEST\":\n      return { ...state,\n        loading: true\n      };\n\n    case \"FETCH_SUCCESS\":\n      return { ...state,\n        product: action.payload,\n        loading: false\n      };\n\n    case \"FETCH_FAIL\":\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nfunction ProductPage(props) {\n  _s();\n\n  const params = useParams();\n  const {\n    slug\n  } = params;\n  const [{\n    loading,\n    error,\n    product\n  }, dispatch] = useReducer(reducer, {\n    product: [],\n    loading: true,\n    error: \"\"\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({\n        type: \"FETCH_REQUEST\"\n      });\n\n      try {\n        const result = await axios.get(`/api/store/slug/${slug}`);\n        dispatch({\n          type: \"FETCH_SUCCESS\",\n          payload: result.data\n        });\n      } catch (err) {\n        dispatch({\n          type: \"FETCH_FAIL\",\n          payload: getError(err)\n        });\n      }\n    };\n\n    fetchData();\n  }, [slug]);\n  const {\n    state,\n    dipatch: ctxDispatch\n  } = useContext(Store);\n\n  const addToCartHandler = () => {\n    ctxDispatch({\n      type: \"CART_ADD_ITEM\",\n      payload: { ...product,\n        quantity: 1\n      }\n    });\n  };\n\n  return loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n    variant: \"danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"single-product-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-name\",\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-descrption\",\n          children: product.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-price\",\n          children: [\"$ \", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), product.countInStock > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"product-status\",\n          children: \"IN STOCK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"product-status\",\n          children: \"OUT OF STOCK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), product.countInStock > 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"product-button\",\n          onClick: addToCartHandler,\n          children: \"ADD TO CART\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"product-button-nostock\",\n          children: \"ADD TO CART\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: product.image,\n        alt: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProductPage, \"vNkHsdGAPuRjl2tvJDygM/Rhyco=\", false, function () {\n  return [useParams];\n});\n\n_c = ProductPage;\nexport default ProductPage; //use this hook to get product id\n// const { id } = useParams();\n//if product id matches id from useParams hook, return product info\n// const product = productData.products.find(\n//   (productId) => productId.id === Number(id)\n// );\n//OLD CODE\n//   console.log(\"-----\", props.match.params.id);\n//   const productDetails = useSelector((state) => state.productDetails);\n//   const { product, loading, error } = productDetails;\n//   const dispatch = useDispatch();\n//   useEffect(() => {\n//     dispatch(detailsProduct(props.match.params.id));\n//     return () => {};\n//   }, []);\n//   return (\n//     <div>\n//       <div className=\"store-backlink\">\n//         <Link to=\"/store\" className=\"store-backlink\">\n//           Back to LTBT STORE\n//         </Link>\n//       </div>\n//       {loading ? (\n//         <div>Loading...</div>\n//       ) : error ? (\n//         <div>{error}</div>\n//       ) : (\n//         <div className=\"product-details-container\">\n//           <div className=\"product-details-image\">\n//             <img src={product.image} alt=\"ltbt merch\" />\n//           </div>\n//           <div className=\"product-details-info\">\n//             <h1 className=\"product-details-name\">{product.name}</h1>\n//             <h5 className=\"product-details-price\">$ {product.price}</h5>\n//             <p className=\"product-details-description\">{product.description}</p>\n//           </div>\n//           <div className=\"product-action\">\n//             <div className=\"product-qty\">\n//               QTY:{\" \"}\n//               <select>\n//                 <option>1</option>\n//                 <option>2</option>\n//                 <option>3</option>\n//                 <option>4</option>\n//               </select>\n//             </div>\n//             <button className=\"product-cart-button\">ADD TO CART</button>\n//           </div>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"sources":["D:/PROJECTS/ltbt-podcast/frontend/src/components/ProductPage.jsx"],"names":["productData","useParams","Link","useSelector","useDispatch","useContext","useEffect","useReducer","axios","detailsProduct","LoadingBox","MessageBox","getError","Store","Nav","reducer","state","action","type","loading","product","payload","error","ProductPage","props","params","slug","dispatch","fetchData","result","get","data","err","dipatch","ctxDispatch","addToCartHandler","quantity","name","description","price","countInStock","image"],"mappings":"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","sourcesContent":["import \"../styles/ProductPage.scss\";\r\nimport { productData } from \"../data/data\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useContext, useEffect, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport { detailsProduct } from \"../actions/productActions\";\r\nimport LoadingBox from \"./LoadingBox\";\r\nimport MessageBox from \"./MessageBox\";\r\nimport { getError } from \"../utils\";\r\nimport { Store } from \"../Store\";\r\nimport Nav from \"./Nav\";\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_REQUEST\":\r\n      return { ...state, loading: true };\r\n    case \"FETCH_SUCCESS\":\r\n      return { ...state, product: action.payload, loading: false };\r\n    case \"FETCH_FAIL\":\r\n      return { ...state, loading: false, error: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nfunction ProductPage(props) {\r\n  const params = useParams();\r\n  const { slug } = params;\r\n\r\n  const [{ loading, error, product }, dispatch] = useReducer(reducer, {\r\n    product: [],\r\n    loading: true,\r\n    error: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      dispatch({ type: \"FETCH_REQUEST\" });\r\n      try {\r\n        const result = await axios.get(`/api/store/slug/${slug}`);\r\n        dispatch({ type: \"FETCH_SUCCESS\", payload: result.data });\r\n      } catch (err) {\r\n        dispatch({ type: \"FETCH_FAIL\", payload: getError(err) });\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [slug]);\r\n\r\n  const { state, dipatch: ctxDispatch } = useContext(Store);\r\n  const addToCartHandler = () => {\r\n    ctxDispatch({\r\n      type: \"CART_ADD_ITEM\",\r\n      payload: { ...product, quantity: 1 },\r\n    });\r\n  };\r\n\r\n  return loading ? (\r\n    <LoadingBox />\r\n  ) : error ? (\r\n    <MessageBox variant=\"danger\">{error}</MessageBox>\r\n  ) : (\r\n    <div>\r\n      <Nav />\r\n      <div className=\"single-product-container\">\r\n        <div className=\"product-info\">\r\n          <div className=\"product-name\">{product.name}</div>\r\n          <div className=\"product-descrption\">{product.description}</div>\r\n          <div className=\"product-price\">$ {product.price}</div>\r\n          {product.countInStock > 0 ? (\r\n            <p className=\"product-status\">IN STOCK</p>\r\n          ) : (\r\n            <p className=\"product-status\">OUT OF STOCK</p>\r\n          )}\r\n          {product.countInStock > 0 ? (\r\n            <button className=\"product-button\" onClick={addToCartHandler}>\r\n              ADD TO CART\r\n            </button>\r\n          ) : (\r\n            <button className=\"product-button-nostock\">ADD TO CART</button>\r\n          )}\r\n        </div>\r\n        <img src={product.image} alt={product.name}></img>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductPage;\r\n\r\n//use this hook to get product id\r\n// const { id } = useParams();\r\n\r\n//if product id matches id from useParams hook, return product info\r\n// const product = productData.products.find(\r\n//   (productId) => productId.id === Number(id)\r\n// );\r\n\r\n//OLD CODE\r\n//   console.log(\"-----\", props.match.params.id);\r\n//   const productDetails = useSelector((state) => state.productDetails);\r\n//   const { product, loading, error } = productDetails;\r\n//   const dispatch = useDispatch();\r\n\r\n//   useEffect(() => {\r\n//     dispatch(detailsProduct(props.match.params.id));\r\n\r\n//     return () => {};\r\n//   }, []);\r\n\r\n//   return (\r\n//     <div>\r\n//       <div className=\"store-backlink\">\r\n//         <Link to=\"/store\" className=\"store-backlink\">\r\n//           Back to LTBT STORE\r\n//         </Link>\r\n//       </div>\r\n//       {loading ? (\r\n//         <div>Loading...</div>\r\n//       ) : error ? (\r\n//         <div>{error}</div>\r\n//       ) : (\r\n//         <div className=\"product-details-container\">\r\n//           <div className=\"product-details-image\">\r\n//             <img src={product.image} alt=\"ltbt merch\" />\r\n//           </div>\r\n//           <div className=\"product-details-info\">\r\n//             <h1 className=\"product-details-name\">{product.name}</h1>\r\n//             <h5 className=\"product-details-price\">$ {product.price}</h5>\r\n//             <p className=\"product-details-description\">{product.description}</p>\r\n//           </div>\r\n//           <div className=\"product-action\">\r\n//             <div className=\"product-qty\">\r\n//               QTY:{\" \"}\r\n//               <select>\r\n//                 <option>1</option>\r\n//                 <option>2</option>\r\n//                 <option>3</option>\r\n//                 <option>4</option>\r\n//               </select>\r\n//             </div>\r\n//             <button className=\"product-cart-button\">ADD TO CART</button>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}